<html>
<head>
    <meta charset="utf-8">
    <!-- jQuery -->
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
</head>

<body>
<!-- localhost:2080/~liefeld/exportregion.php?filename=test.txt&downloadContent=sdfkj -->
<script>
    $( document ).ready(function() {

        $('#downloadLink').click(function(){

            var form, hiddenFilenameInput, hiddenDownloadContent;

            form = document.createElement("form");
            document.body.appendChild(form);
            form.setAttribute("method", "post");
            form.setAttribute("action", "exportregion.php");

            // file name
            hiddenFilenameInput = document.createElement("input");
            form.appendChild(hiddenFilenameInput);
            hiddenFilenameInput.setAttribute("type", "hidden");
            hiddenFilenameInput.setAttribute("name", "filename");
            hiddenFilenameInput.setAttribute("value", $('#filenameText').val());

            // ingest contents of textarea named #downloadContent
            hiddenDownloadContent = document.createElement("input");
            form.appendChild(hiddenDownloadContent);
            hiddenDownloadContent.setAttribute("type", "hidden");
            hiddenDownloadContent.setAttribute("name", "downloadContent");
            hiddenDownloadContent.setAttribute("value", $('#downloadContent').val());

            // submit and self distruct
            form.submit();
            form.detach();
        });


    });
</script>
<h2> Here is the static form that does what we want</h2>
<form id='staticform' action='exportregion.php' method="post">

    Filename: <input id='filenameText' type='text' name='filename' value='myData.txt'/>
    <br/>
    Content:  <textarea id='downloadContent' rows="4" cols="50" name='downloadContent'>Default content</textarea>
    <br/>
    <button type='submit' name="download" value="download">Download</button>

</form>
<br/>
<h2>Here is a clickable label to do it in javascript.</h2>


It will pull content from the text area above but you can
get content from anywhere you like. Its setup in the ready() method. <br/>
<div id='downloadLink' style="color: #22D;cursor: pointer;text-decoration: underline;">Click here to download with JS</div>



</body>
</html>

