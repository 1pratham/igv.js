<html>
<head>
 <meta charset="utf-8">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
  <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
</head>

<body>
<!-- localhost:2080/~liefeld/igvdownload.php?filename=test.txt&downloadContent=sdfkj -->
<script>
$( document ).ready(function() {
	
	$('#downloadLink').click(function(){
		alert('downloading...');
		var form = document.createElement("form");
	    form.setAttribute("method", "post");
	    form.setAttribute("action", "igvdownload.php");

	    var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", "filename");
        hiddenField.setAttribute("value", $('#filenameText').val());
        form.appendChild(hiddenField);

	
        var hiddenField = document.createElement("input");
        hiddenField.setAttribute("type", "hidden");
        hiddenField.setAttribute("name", "downloadContent");
        hiddenField.setAttribute("value", $('#downloadContent').val());
        form.appendChild(hiddenField);
        
        
        document.body.appendChild(form);
        form.submit();
		form.detach();
	});
	
	
	});
</script>
<h2> Here is the static form that does what we want</h2>
<form id='staticform' action='igvdownload.php' method="post">

Filename: <input id='filenameText' type='text' name='filename' value='myData.txt'/>
<br/>
Content:  <textarea id='downloadContent' rows="4" cols="50" name='downloadContent'>Default content</textarea>
<br/>
<button type='submit' name="download" value="download">Download</button>

</form>
<br/>
<h2>Here is a clickable label to do it in javascript.</h2>


 It will pull content from the text area above but you can
get content from anywhere you like. Its setup in the ready() method. <br/> 
<div id='downloadLink' style="color: #22D;cursor: pointer;text-decoration: underline;">Click here to download with JS</div>



</body>
</html>

